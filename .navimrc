" after restart Neovim (or Vim),
" run `call dein#clear_state() || call dein#update()` to apply changes

" settings before all
function! BeforeAll()

  set termguicolors

  let g:navim_settings = {}

  " layers
  let g:navim_settings.layers = [
      \ 'game',
      \ 'c',
      \ 'completion',
      \ 'core',
      \ 'editing',
      \ 'go',
      \ 'indents',
      \ 'javascript',
      \ 'language',
      \ 'misc',
      \ 'navigation',
      \ 'ruby',
      \ 'python',
      \ 'scm',
      \ 'web',
      \ 'unite']
  "'ruby', 'scala', 'textobj', 'web'

  " additional plugins
  let g:navim_settings.additional_plugins = [
    \ 'thoughtbot/vim-rspec',
    \ 'dag/vim-fish',
    \ 'tpope/vim-abolish',
    \ 'tpope/vim-dispatch',
    \ 'cloudhead/neovim-fuzzy',
    \ 'takac/vim-hardtime',
    \ 'rhysd/clever-f.vim',
    \ 'kristijanhusak/vim-carbon-now-sh',
    \ 'slim-template/vim-slim',
    \ 'sheerun/vim-polyglot',
    \ 'jiangmiao/auto-pairs',
    \ 'ajmwagar/vim-deus' ]
  "'joshdick/onedark.vim', 'yonchu/accelerated-smooth-scroll', 'edkolev/tmuxline.vim'
    " \ 'ctrlpvim/ctrlp.vim',
    " \ 'tacahiroy/ctrlp-funky',

  " disabled plugins
  let g:navim_settings.disabled_plugins = []

  " core
  let g:navim_settings.encoding = 'utf-8'
  "let g:navim_settings.encoding = 'gbk'
  "let g:navim_settings.encoding = 'latin1'
  let g:navim_settings.default_indent = 2
  "let g:navim_settings.bin_dir = '/usr/local/bin'
  let g:navim_settings.cscopeprg = 'gtags-cscope'
  "let g:navim_settings.cscopeprg = 'cscope'

  " plugins
  " let g:navim_settings.completion_autoselect = 0
  " let g:navim_settings.completion_plugin = 'ycm'
  let g:navim_settings.explorer_plugin = 'nerdtree'
  "let g:navim_settings.explorer_plugin = 'vimfiler'
  let g:navim_settings.statusline_plugin = 'airline'
  "let g:navim_settings.statusline_plugin = 'lightline'

  " user interface
  "let g:navim_settings.colorscheme = 'solarized'
  let g:navim_settings.colorscheme = 'deus'
  "let g:navim_settings.colorscheme = 'jellybeans'
  "let g:navim_settings.colorscheme = 'onedark'
  let g:navim_settings.force256 = 0
  let g:navim_settings.termtrans = 0
  let g:navim_settings.max_column = 80
  let g:navim_settings.powerline_fonts = 1
  let g:navim_settings.nerd_fonts = 1

  let g:airline_theme='deus'

  let g:loaded_syntastic_ruby_rubocop_checker = 1

  " ale linting
  let g:airline#extensions#ale#enabled = 1
  let g:ale_fixers = {}
  let g:ale_fixers.ruby = [
      \ 'remove_trailing_lines',
      \ 'rubocop']
  let g:ale_fixers.javascript = [
      \ 'standard' ]
  let g:ale_ruby_rubocop_options = '--rails --display-style-guide'
  let g:ale_fix_on_save = 1

endfunction

" settings after all
function! AfterAll()

  " use spaces instead of tabs
  set expandtab
  "set noexpandtab

  set mouse-=a

  set background=dark

  nnoremap \ :FuzzyOpen<CR>

  autocmd FileType ruby nmap <LocalLeader>r :call RunCurrentSpecFile()<CR>

  let g:hardtime_default_on = 1

endfunction


" vim: fdm=marker ts=2 sts=2 sw=2 fdl=0

